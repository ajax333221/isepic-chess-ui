<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Isepic Chess - Demo</title>
		
		<link rel="stylesheet" href="./css/isepic-chess-ui.css">
		
		<script src="./js/jquery-3.3.1.min.js"></script>
		<script src="./js/isepic-chess.js"></script>
		<script src="./js/isepic-chess-ui.js"></script>
		
		<script>
			$(function(){
				var main_board, unlabeled_board, other_board, oc_board, h_board, rff_board, pgn_board, sloppy_pgn;
				
				Ic.setSilentMode(false);
				
				main_board=Ic.initBoard({
					boardName : "main"
				});
				
				//you can remove the board labels with "isUnlabeled : true" (optional, default false)
				//to not show "ABCDEFGH 12345678 / HGFEDCBA 87654321" around this specific board
				unlabeled_board=Ic.initBoard({
					boardName : "no_labels",
					isUnlabeled : true
				});
				
				//you can rotate the board with "isRotated : true" (optional, default false)
				//and change the pawn promotion value "promoteTo" to "n", "b", "r", "q" (optional, default "q")
				other_board=Ic.initBoard({
					boardName : "other",
					isRotated : true,
					promoteTo : "b"
				});
				
				//you can initialize a board without assigning it to a variable
				//and later create a reference to it with Ic.selectBoard()
				Ic.initBoard({boardName : "other_copy"});
				oc_board=Ic.selectBoard("other_copy");
				
				//if you don't want a board to accidentally perform any DOM interactions
				//consider using "isHidden : true" (optional, default false)
				h_board=Ic.initBoard({
					boardName : "hidden_board",
					isHidden : true
				});
				
				//John William Schulten vs Paul Morphy, New York (1857)
				//you can start a board from a fen position too
				rff_board=Ic.initBoard({
					boardName : "resume_from_fen",
					fen : "r5k1/pp3ppp/7n/8/2P2P1K/3P1q2/P1PBb2P/R5QR b - - 3 22"
				});
				
				sloppy_pgn=`[Event "test"]
[SetUp "1"]
[FEN "rnbqkbnr/pp2pppp/2p5/3P4/3P4/8/PPP2PPP/RNBQKBNR b KQkq - 0 3"]

3... cxd5 00400. c4 {	Later in "quote" i'm: 3 exd5 cxd5
is another player x before anyone had heard of x! 	} 4...Nf6 5. Nc3 Nc6 6. Nf3 Bg4 7. cxd5
Nxd5+- 8.Bb5 Qa5-+ 9. Qb3 {!} 9. ... Bxf3 10. gxf3 Nxc3 11. Bxc6+ {? It
was Alekhine that improved with 11 bxc3 e6 12 d5! } 11 ... bxc6 12. Qb7 {?} Nd5+
13. Bd2 Qb6 {!} 14. Qxa8+ Kd7 15. 0 - 0 {If 15 a4 Nc7 16 a5 Qxb2
17 Qxa7 Qxa1+ } 15 . ...Nc7 16. Ba5 Nxa8 17. Bxb6 Nxb6 18. Rfc1
e6 19. Rc2 Be7 20. Rac1 Bg5 21. Rd1 Rb8 22. Rc5 Nd5 23. Ra5
Rb7 24. Rd3 Bd8 25. Rb3   Rxb3   Rxa7+	 Nc7  -+  axb3 Bf6
28. Rb7   {	If  28  Ra4 Nb5! }  28 ...Bxd4 29. Rb8 Bxb2 30. h3 f5
31. Kf1 Nd5 32. Kg2 +-- Be5 33. Ra8++ Nf4-- 34 . Kh2-+++ Nd3+--- 35 .Kg1--++ Ne1 ++--
366666 ..... Ra7+!? Bc7 o -  1`;
				
				//load game from a PGN
				//"validOrBreak : true" (optional, default false) forces a return of null on error or the
				//full parsed game. Remove it to allow partial parsing up until the last recognized move
				pgn_board=Ic.initBoard({
					boardName : "pgn_loaded",
					pgn : sloppy_pgn,
					validOrBreak : true
				});
				
				other_board.moveCaller("f2", "f4");
				
				//you can call a board method from Ic.selectBoard(string) too (but if you typo
				//the name you will be calling null.<boardMethod>(...) and crashing errors will happen,
				//the safe way is to check if the board is !== than null before calling board methods)
				Ic.selectBoard("other").moveCaller("e7", "e6");
				
				//you can pass other types of squares too ([6, 6]="g2")
				other_board.moveCaller([6, 6], other_board.getSquare("g4"));
				
				//Ic.selectBoard(board_obj) pointless but works
				Ic.selectBoard(other_board).moveCaller("d8", "h4");
				
				//alternatively -> other_board.setCurrentMove(0, true)
				other_board.navFirst();
				
				//alternatively -> other_board.cloneBoardTo(oc_board)
				//the parameter can accept a board name (string) too
				oc_board.cloneBoardFrom(other_board);
				
				//tip: instead of toggle you can set a specific value by passing
				//boolean true = set rotated and boolean false = set not rotated
				rff_board.toggleIsRotated();
				
				//refresh the board to change to it
				//many methods refresh the boards (so it is best to make one last refresh
				//to make sure that this board will be the one displayed and without animations)
				main_board.refreshBoard();
				
				//this is not part of the UI library (might be in the future)
				$("#ic_ui_smaller").click(function(){
					var elm;
					
					elm=$("#ic_ui_board").parent();
					
					elm.css({
						"width" : Math.max(200, Math.ceil(elm.width()*0.8)),
						"height" : Math.max(200, Math.ceil(elm.height()*0.8))
					});
					
					if($(this).prop("tagName")==="A"){
						return false;
					}
				});
				
				$("#ic_ui_bigger").click(function(){
					var elm;
					
					elm=$("#ic_ui_board").parent();
					
					elm.css({
						"width" : Math.min(800, Math.ceil(elm.width()*1.2)),
						"height" : Math.min(800, Math.ceil(elm.height()*1.2))
					});
					
					if($(this).prop("tagName")==="A"){
						return false;
					}
				});
			});
		</script>
	</head>
	<body>
		<div class="ic_ui_main">
			<div class="ic_ui_header">
				<h3>GitHub: <a href="https://github.com/ajax333221/isepic-chess">isepic-chess</a> | <a href="https://github.com/ajax333221/isepic-chess-ui">isepic-chess-ui</a></h3>
			</div>
			
			<hr>
			
			<p>Change board size: <a id="ic_ui_smaller" href="#">[ - ]</a> <a id="ic_ui_bigger" href="#">[ + ]</a></p>
			
			<!-- this inline-style of 400x400 is overwritting a default 100%x100% -->
			<!-- remove only when wrapped inside a NxN-squared parent with defined height and width -->
			<div class="ic_ui_board" style="height:400px;width:400px">
				<div id="ic_ui_board"></div>
			</div>
			
			<hr>
			
			<div class="ic_ui_materialdiff">
				<div id="ic_ui_materialdiff"></div>
			</div>
			
			<hr>
			
			<div class="ic_ui_controls">
				<div>
					<input id="ic_ui_fen" value="" type="text">
				</div>
				
				<hr>
				
				<div>
					<input id="ic_ui_nav_first" value="|<" type="button">
					<input id="ic_ui_nav_previous" value="<" type="button">
					<input id="ic_ui_nav_next" value=">" type="button">
					<input id="ic_ui_nav_last" value=">|" type="button">
					<input id="ic_ui_rotate" value="rotate" type="button">
					
					<select id="ic_ui_promote">
						<option value="5" selected="selected">queen</option>
						<option value="4">rook</option>
						<option value="3">bishop</option>
						<option value="2">knight</option>
					</select>
				</div>
				
				<hr>
				
				<div class="ic_ui_tabs">
					<div id="ic_ui_tabs"></div>
				</div>
				
				<hr>
				
				<div class="ic_ui_movelist">
					<div id="ic_ui_movelist"></div>
				</div>
			</div>
			
			<hr>
			
			<div class="ic_ui_debug">
				<div>
					<a id="ic_ui_debug_toggle" href="#">Debug â–²</a>
				</div>
				
				<div id="ic_ui_debug" style="display:none"></div>
			</div>
		</div>
	</body>
</html>
