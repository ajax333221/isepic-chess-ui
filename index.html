<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Isepic Chess - Demo</title>
		
		<link rel="stylesheet" href="./css/isepic-chess-ui.css">
		
		<script src="./js/jquery-3.3.1.min.js"></script>
		<script src="./js/isepic-chess.js"></script>
		<script src="./js/isepic-chess-ui.js"></script>
		
		<script>
			$(function(){
				var temp, main_board, unlabeled_board, other_board, oc_board, h_board, rff_board, pgn_board, pgn_example;
				
				Ic.setSilentMode(false);
				
				main_board=Ic.initBoard({
					boardName : "main"
				});
				
				//you can remove the board labels with "isUnlabeled : true" (optional, default false)
				//to not show "ABCDEFGH 12345678 / HGFEDCBA 87654321" around this specific board
				unlabeled_board=Ic.initBoard({
					boardName : "no_labels",
					isUnlabeled : true
				});
				
				//you can rotate the board with "isRotated : true" (optional, default false)
				//and change the pawn promotion value "promoteTo" to "n", "b", "r", "q" (optional, default "q")
				other_board=Ic.initBoard({
					boardName : "other",
					isRotated : true,
					promoteTo : "b"
				});
				
				//you can initialize a board without assigning it to a variable
				//and later create a reference to it with Ic.getBoard()
				Ic.initBoard({boardName : "other_copy"});
				oc_board=Ic.getBoard("other_copy");
				
				//if you don't want a board to accidentally perform any DOM interactions
				//consider using "isHidden : true" (optional, default false)
				h_board=Ic.initBoard({
					boardName : "hidden_board",
					isHidden : true
				});
				
				//John William Schulten vs Paul Morphy, New York (1857)
				//you can start a board from a fen position too
				rff_board=Ic.initBoard({
					boardName : "resume_from_fen",
					fen : "r5k1/pp3ppp/7n/8/2P2P1K/3P1q2/P1PBb2P/R5QR b - - 3 22"
				});
				
				pgn_example=`[Event "7th Sunway Sitges 2020"]
[Site "Sitges ESP"]
[Date "2020.12.13"]
[Round "1.4"]
[White "Martin Barcelo, Carles"]
[Black "Lagarde, Maxime"]
[Result "1/2-1/2"]
[BlackTitle "GM"]
[WhiteElo "2179"]
[BlackElo "2651"]
[ECO "B29"]
[Opening "Sicilian"]
[Variation "Nimzovich-Rubinstein variation"]
[WhiteFideId "24561444"]
[BlackFideId "662399"]
[EventDate "2020.12.13"]

1. e4 c5 2. Nf3 Nf6 3. e5 Nd5 4. Nc3 Nxc3 5. dxc3 Nc6 6. Bd3 Qc7 7. Qe2 e6 8.
Bf4 h6 9. h4 a6 10. O-O b5 11. c4 b4 12. Bg3 Bb7 13. Be4 Ne7 14. Nd2 Bxe4 15.
Nxe4 Nf5 16. Rfd1 Be7 17. h5 Nxg3 18. Nxg3 O-O 19. Rd3 d6 20. Rad1 Rad8 21. exd6
Bxd6 22. Ne4 Bh2+ 23. Kh1 Rxd3 24. Rxd3 Be5 25. b3 Bd4 26. Nd2 Qf4 27. Nf3 Bc3
28. g3 Qg4 29. Ng1 Qg5 30. Kg2 a5 31. Nh3 Qe7 32. Qe4 Bd4 33. Nf4 Qg5 34. Ne2 e5
35. Nxd4 exd4 36. Rf3 Qxh5 37. Qf5 Qg6 38. Qxc5 Qxc2 39. Qxd4 Qxa2 40. Qa7 a4
41. Qxa4 Qxa4 42. bxa4 Ra8 43. c5 Rxa4 44. c6 Ra6 45. Rb3 Rxc6 46. Rxb4 Kh7 47.
Rf4 Rc7 48. Kf3 g5 49. Rf6 Kg7 50. Ra6 h5 51. Rb6 f6 52. Rb8 Kg6 53. Rb6 Rc5 54.
Rb8 Kf5 55. Rb4 Ke5 56. Re4+ Kf5 57. Rb4 Rc3+ 58. Kg2 Rd3 59. Ra4 Rd8 60. Kf3
Rh8 61. Ra5+ Kg6 62. Ra4 h4 63. gxh4 gxh4 64. Kg4 h3 65. Ra1 h2 66. Rh1 Rh5 67.
Kg3 Kf5 68. Rxh2 Rxh2 69. Kxh2 Ke4 70. Kg3 f5 71. f4 Ke3 72. Kg2 Kxf4 73. Kf2
Ke4 74. Ke2 f4 75. Kf2 f3 76. Kf1 1/2-1/2`;
				
				//load game from a PGN
				//"validOrBreak : true" (optional, default false) forces a return of null on error or the
				//full parsed game. Remove it to allow partial parsing up until the last recognized move
				pgn_board=Ic.initBoard({
					boardName : "pgn_loaded",
					pgn : pgn_example,
					validOrBreak : true
				});
				
				//you can call board methods from the board objects
				other_board.playMove("f2-f4");
				
				//it is risky to call Ic.getBoard(string).<boardMethod>() directly
				//because if you typo the board name you would be calling null.<boardMethod>()
				temp=Ic.getBoard("other");
				
				if(temp!==null){
					temp.playMove("e7-e6");
				}
				
				//Ic.getBoard(board_obj) is pointless but it works too
				Ic.getBoard(other_board).playMove("a2-a3");
				
				//you can pass SAN moves too
				other_board.playMove("Bxa3");
				other_board.playMove("Nc3");
				
				//you can change the default delimiter of a joined move to any
				//single character as long as it appears only once
				other_board.playMove("g8_h6", {delimiter : "_"});
				
				//there is also a [initial_qos, final_qos] notation
				//the square-type can be mixed in here
				other_board.playMove(["c3", [4, 4]]);
				
				//the SAN is fexible, allowing lower-case Os and 0s when castling
				//also the extra spaces are removed
				other_board.playMove(" 0 - 0  ");
				
				//everything insde {}s gets removed
				other_board.playMove("Nf3 {hi}");
				
				//from inside ()s too
				other_board.playMove("b5 (bye)");
				
				//you can't use "Ng5" in here because of the ambiguity with the other knight
				other_board.playMove("Ng5");//returns false and is not played
				
				//the correct SAN to move f3-g5 is "Nfg5"
				//but "N3g5" and "Nf3g5" work too
				other_board.playMove("Nfg5");//returns true and is played
				
				other_board.playMove("b4");
				other_board.playMove("bxa3");
				other_board.playMove("b3");
				other_board.playMove("Ra2");
				other_board.playMove("b2");
				other_board.playMove("Nxh7");
				
				//the order of precedence when promoting a pawn is:
				//1) {promoteTo : X} optional key (if found)
				//2) "=X" from a SAN move (if found)
				//3) board.promoteTo board property (or default value of 5 = queen)
				//examples:
				//b.playMove("b2-b1") records "b1=B" because #3
				//b.playMove("b2-b1", {promoteTo : "R"}) records "b1=R" because #1
				//b.playMove("b1=Q") records "b1=Q" because #2
				//currently it is NOT possible to specify a "=X" on a joined (e.g "b2-b1=R")
				other_board.playMove("b1=R", {promoteTo : "n"});//true, the move is "b1=N" because #1
				
				other_board.playMove("g4");
				other_board.playMove("Kxh7");
				other_board.playMove("Nd6");
				
				//you can safely omit check/checkmate symbols and the move will
				//still be recognized: "Qh4+", "Qh4++" and "Qh4#"
				other_board.playMove("Qh4");
				
				//alternatively -> other_board.setCurrentMove(0, true)
				other_board.navFirst();
				
				//alternatively -> other_board.cloneBoardTo(oc_board)
				//the parameter can accept a board name (string) too
				oc_board.cloneBoardFrom(other_board);
				
				//tip: instead of toggle you can set a specific value by passing
				//boolean true = set rotated and boolean false = set not rotated
				rff_board.toggleIsRotated();
				
				//refresh the board to change to it
				//many methods refresh the boards (so it is best to make one last refresh
				//to make sure that this board will be the one displayed and without animations)
				main_board.refreshBoard();
				
				//this is not part of the UI library, just some jQuery
				$("#ic_ui_smaller").click(function(){
					var elm;
					
					elm=$("#ic_ui_board").parent();
					
					elm.css({
						"width" : Math.max(200, Math.ceil(elm.width()*0.8)),
						"height" : Math.max(200, Math.ceil(elm.height()*0.8))
					});
					
					if($(this).prop("tagName")==="A"){
						return false;
					}
				});
				
				//and some more jQuery...
				$("#ic_ui_bigger").click(function(){
					var elm;
					
					elm=$("#ic_ui_board").parent();
					
					elm.css({
						"width" : Math.min(800, Math.ceil(elm.width()*1.2)),
						"height" : Math.min(800, Math.ceil(elm.height()*1.2))
					});
					
					if($(this).prop("tagName")==="A"){
						return false;
					}
				});
			});
		</script>
	</head>
	<body>
		<div class="ic_ui_main">
			<div class="ic_ui_header">
				<h3>GitHub: <a href="https://github.com/ajax333221/isepic-chess">isepic-chess</a> | <a href="https://github.com/ajax333221/isepic-chess-ui">isepic-chess-ui</a></h3>
			</div>
			
			<hr>
			
			<p>Change board size: <a id="ic_ui_smaller" href="#">[ - ]</a> <a id="ic_ui_bigger" href="#">[ + ]</a></p>
			
			<!-- this inline-style of 400x400 is overwritting a default 100%x100% -->
			<!-- remove only when wrapped inside a NxN-squared parent with defined height and width -->
			<div class="ic_ui_board" style="height:400px;width:400px">
				<div id="ic_ui_board"></div>
			</div>
			
			<hr>
			
			<div class="ic_ui_materialdiff">
				<div id="ic_ui_materialdiff"></div>
			</div>
			
			<hr>
			
			<div class="ic_ui_controls">
				<div>
					<input id="ic_ui_fen" value="" type="text">
				</div>
				
				<hr>
				
				<div>
					<input id="ic_ui_nav_first" value="|<" type="button">
					<input id="ic_ui_nav_previous" value="<" type="button">
					<input id="ic_ui_nav_next" value=">" type="button">
					<input id="ic_ui_nav_last" value=">|" type="button">
					<input id="ic_ui_rotate" value="rotate" type="button">
					
					<select id="ic_ui_promote">
						<option value="5" selected="selected">queen</option>
						<option value="4">rook</option>
						<option value="3">bishop</option>
						<option value="2">knight</option>
					</select>
				</div>
				
				<hr>
				
				<div class="ic_ui_tabs">
					<div id="ic_ui_tabs"></div>
				</div>
				
				<hr>
				
				<div class="ic_ui_movelist">
					<div id="ic_ui_movelist"></div>
				</div>
			</div>
			
			<hr>
			
			<div class="ic_ui_debug">
				<div>
					<a id="ic_ui_debug_toggle" href="#">Debug â–²</a>
				</div>
				
				<div id="ic_ui_debug" style="display:none"></div>
			</div>
		</div>
	</body>
</html>
